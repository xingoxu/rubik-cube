<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <style>
    .cube>div {
      width: 100px;
      height: 100px;
      background-color: rgba(100, 100, 100, 0.5);
      border: 1px solid red;
      position: absolute;
    }

    .front {
      transform: translateZ(50px);
    }

    .back {
      transform: translateZ(-50px);
    }

    .left {
      transform: translateX(-50px) rotateY(90deg);
    }

    .right {
      transform: translateX(50px) rotateY(90deg);
    }

    .top {
      transform: translateY(-50px) rotateX(90deg);
    }

    .bottom {
      transform: translateY(50px) rotateX(90deg);
    }

    .cube {
      position: relative;
      width: 100px;
      height: 100px;
      margin: 1.5em auto;
      transform-style: preserve-3d;
    }

    .stage {
      perspective: 500px;
    }
  </style>
</head>

<body>
  <div class="stage">
    <div class="cube">
      <div class="front"></div>
      <div class="back"></div>
      <div class="left"></div>
      <div class="right"></div>
      <div class="top"></div>
      <div class="bottom"></div>
    </div>
  </div>
  <script>
    let pointerIsDown = false;
    let x = 0,
      y = 0,
      z = 0;
    let startPoint = { x: 0, y: 0 };
    let cube = document.querySelector('.cube');
    document.addEventListener("pointerdown", (event) => {
      pointerIsDown = true;
      startPoint = { x: event.x, y: event.y };
    });
    document.addEventListener("pointermove", (event) => {
      if (!pointerIsDown) return;
      let xNow = (event.x - startPoint.x) + x;
      let yNow = (event.y - startPoint.y) * (-1) + y;
      // // if (xNow > 90) xNow = 90;
      if (yNow > 90) yNow = 90;
      // // if (xNow < -90) xNow = -90;
      if (yNow < -90) yNow = -90;
      cube.setAttribute('style', `transform: rotateX(${yNow}deg) rotateY(${xNow}deg)`);
    });
    document.addEventListener("pointerup", (event) => {
      pointerIsDown = false;
      x = (event.x - startPoint.x) + x;
      y = (event.y - startPoint.y) * (-1) + y;
      // if (x > 90) x = 90;
      if (y > 90) y = 90;
      // if (x < -90) x = -90;
      if (y < -90) y = -90;
    });
  </script>
</body>

</html>